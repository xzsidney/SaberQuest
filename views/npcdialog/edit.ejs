<%- include('../partials/header/header.ejs'); %>
<%- include('../partials/menu/menuPlayer'); %>

<div class="container mt-5">
  <div class="containerGame">
    <div class="game-ui bg-dark text-white p-4 rounded shadow"
      style="background-color: rgba(0, 0, 0, 0.85); border: 2px solid #009c3b; max-width: 800px; margin: auto;">

      <h2 class="text-warning text-center mb-4">✏️ Editar Diálogo de NPC</h2>

      <form action="/npc-dialogs/<%= dialog.id %>/edit" method="POST">
        <div class="mb-3">
          <label for="npcName" class="form-label">Nome do NPC</label>
          <input type="text" class="form-control" id="npcName" name="npcName" value="<%= dialog.npcName %>" required>
        </div>

        <div class="mb-3">
          <label for="npcType" class="form-label">Tipo do NPC</label>
          <select class="form-select" id="npcType" name="npcType" required>
            <option value="">Selecione...</option>
            <option value="Professor" <%= dialog.npcType === 'Professor' ? 'selected' : '' %>>Professor</option>
            <option value="Alune" <%= dialog.npcType === 'Alune' ? 'selected' : '' %>>Alune</option>
            <option value="Funcionário" <%= dialog.npcType === 'Funcionário' ? 'selected' : '' %>>Funcionário</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="npcMood" class="form-label">Humor do NPC</label>
          <input type="text" class="form-control" id="npcMood" name="npcMood" value="<%= dialog.npcMood %>">
        </div>

        <div class="mb-3">
          <label for="dialogText" class="form-label">Texto da Fala</label>
          <textarea class="form-control" id="dialogText" name="dialogText" rows="3"><%= dialog.dialogText %></textarea>
        </div>

        <div class="mb-3">
          <label for="actionResultId" class="form-label">Resultado da Ação Relacionado</label>
          <select class="form-select" id="actionResultId" name="actionResultId" required>
            <option value="">Selecione...</option>
            <% actionResults.forEach(result => { %>
              <option value="<%= result.id %>" <%= dialog.actionResultId === result.id ? 'selected' : '' %>>
                <%= result.name %> (ID: <%= result.id %>)
              </option>
            <% }) %>
          </select>
        </div>

        <div class="text-center mt-4">
          <button type="submit" class="btn btn-success px-4">Salvar Alterações</button>
          <a href="/npc-dialogs/<%= dialog.id %>" class="btn btn-secondary ms-2">Cancelar</a>
        </div>
      </form>

    </div>
  </div>
</div>

<%- include('../partials/footer/footer.ejs'); %>
