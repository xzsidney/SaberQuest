<%- include('../partials/header/header.ejs'); %>
<%- include('../partials/menu/menuPlayer'); %>

<div class="container mt-5">
  <div class="containerGame">
    <div class="game-ui bg-dark text-white p-4 rounded shadow"
      style="background-color: rgba(0, 0, 0, 0.85); border: 2px solid #009c3b; height: 800px; overflow-y: auto;">

      <h2 class="text-warning text-center mb-4">üó®Ô∏è Di√°logos dos NPCs</h2>

      <div class="text-end mb-3">
        <a href="/npc-dialogs/create" class="btn btn-success">+ Novo Di√°logo</a>
      </div>

      <% if (dialogs.length === 0) { %>
        <p class="text-center">Nenhum di√°logo cadastrado ainda.</p>
      <% } else { %>
        <table class="table table-dark table-hover table-striped align-middle">
          <thead class="table-success text-dark">
            <tr class="text-center">
              <th>#</th>
              <th>Nome do NPC</th>
              <th>Tipo</th>
              <th>Humor</th>
              <th>A√ß√£o Relacionada</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            <% dialogs.forEach(dialog => { %>
              <tr>
                <td class="text-center"><%= dialog.id %></td>
                <td><%= dialog.npcName %></td>
                <td><%= dialog.npcType %></td>
                <td><%= dialog.npcMood %></td>
                <td>
                  <%= dialog.ActionResult ? dialog.ActionResult.name : '---' %>
                </td>
                <td class="text-center">
                  <a href="/npc-dialogs/<%= dialog.id %>" class="btn btn-primary btn-sm">Ver</a>
                  <a href="/npc-dialogs/<%= dialog.id %>/edit" class="btn btn-warning btn-sm">Editar</a>
                  <form action="/npc-dialogs/<%= dialog.id %>/delete" method="POST" style="display:inline;" onsubmit="return confirm('Deseja excluir este di√°logo?');">
                    <button type="submit" class="btn btn-danger btn-sm">Excluir</button>
                  </form>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      <% } %>

    </div>
  </div>
</div>

<%- include('../partials/footer/footer.ejs'); %>
